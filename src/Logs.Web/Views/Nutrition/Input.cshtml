@model Logs.Web.Models.Nutrition.InputViewModel

@{
    ViewBag.Title = "Input";
}
<link rel="stylesheet" href="/Content/bootstrap-datetimepicker.css" />

<div class="row">
    <div class="col-sm-3"></div>
    <div class="col-sm-6">
        @Html.LabelFor(m => m.Date)
        @Html.TextBoxFor(m => m.Date, new { @class = "form-control", id = "datetimepicker", data_format = "DD/MM/YYYY" })
    </div>
</div>

<hr />
<div class="row">
    <div class="col-sm-3"></div>
    <div class="col-sm-6">
        <ul class="list-inline intro-social-buttons">
            <li>
                @using (Ajax.BeginForm("Load", "Nutrition",
      new AjaxOptions { HttpMethod = "POST", InsertionMode = InsertionMode.Replace, UpdateTargetId = "nutrition" },
      new { @class = "form-horizontal form col-md-12 center-block", role = "form", id = "nutrition-form" }))
                {
                    @Html.AntiForgeryToken()
                    @Html.HiddenFor(m => m.Date, new { id = "nutrition-model-date" })
                    <input type="submit" class="btn btn-default btn-lg" value="Nutrition" />
                }
            </li>
            <li>

                @using (Ajax.BeginForm("Load", new { controller = "Measurement" },
      new AjaxOptions { HttpMethod = "POST", InsertionMode = InsertionMode.Replace, UpdateTargetId = "measurements", OnFailure = "logError" },
      new { @class = "form-horizontal form col-md-12 center-block", role = "form", id = "measurement-form" }))
                {
                    @Html.AntiForgeryToken()
                    @Html.HiddenFor(m => m.Date, new { id = "measurements-model-date" })
                    <input type="submit" class="btn btn-default btn-lg" value="Measurements" />
                }
            </li>
        </ul>
    </div>
</div>





<div>
    <div id="nutrition">
    </div>

    <div id="measurements">
    </div>
</div>
@section scripts{
    @Scripts.Render("~/bundles/jquery-unobtrusive")
    <script type="text/javascript" src="/scripts/moment.min.js"></script>
    <script type="text/javascript" src="/scripts/bootstrap-datetimepicker.js"></script>

    <script type="text/javascript">
        function logError(context) {
            console.log(context);
        }

        $(function () {
            $('#datetimepicker').datetimepicker({
                format: 'DD/MM/YYYY'
            });

            $('#datetimepicker').on("dp.change", function (e) {
                var date = $('#datetimepicker').val();
                $('#nutrition-model-date').val(date);
                $('#measurements-model-date').val(date);
            });

            $('#nutrition-form').submit(() => {
                $('#measurements').hide();
                $('#nutrition').show();
            });

            $('#measurement-form').submit(() => {
                $('#nutrition').hide();
                $('#measurements').show();
            });
        });
    </script>
}
